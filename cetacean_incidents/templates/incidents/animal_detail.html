{% extends "detail.html" %}
{% load case_extras %}

{% block title %}{{ block.super }}: {{ animal }}{% endblock %}

{% block header %}
{{ block.super }}
<h2>{{ animal }}</h2>
<div><a href="{% url edit_animal animal.id %}">edit</a></div>
{% endblock %}

{% block ids-dl %}
<dt>local ID</dt><dd>{{ animal.id }}</dd>
{% endblock %}

{% block content %}
<div class="section">
    <h3>Info:</h3>
    <table>
        <tr><th>name</th><td>{{ animal.name|default:"<i>none</i>" }}</td></tr>
        <tr>
            <th>taxon</th>
            <td>
                {% if animal.determined_taxon %}
                {{ animal.determined_taxon }} ({{ animal.determined_taxon.common_names }})
                {% else %}
                <i>undetermined</i>{% if animal.probable_taxon %} (probably <i>{{ animal.probable_taxon }}</i>){% endif %}
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>gender</th>
            <td>
                {% if animal.determined_gender %}
                {{ animal.get_determined_gender_display|default:"unknown" }}
                {% else %}
                <i>undetermined</i>{% if animal.probable_gender %} (probably {{ animal.get_probable_gender_display }}){% endif %}
                {% endif %}
            </td>
        </tr>
        {% if animal.determined_dead_before %}
        <tr><th>dead before</th><td>{{ animal.determined_dead_before }}</td></tr>
        <tr>
            <th>necropsied?</th>
            <td>
                {{ animal.necropsy|yesno:"yes,no" }}{% if not animal.necropsied %}<br>
                <i>note that "no" is the same as "unknown" for this field</i>{% endif %}
            </td>
        </tr>
        {% endif %}
    </table>
</div>

<div class="section">
    <h3>Cases:</h3>
    {% if animal.case_set.count %}
    <ul>
        {% for case in animal.case_set.all %}
        <li>{% case_link case %}</li>
        {% endfor %}
    </ul>
    {% else %}
    <i>none</i>
    {% endif %}
    <a href="{% url add_case animal.id %}">add a new case</a>
</div>
{% endblock %}

