{% extends "base.html" %}
{% load animal_extras %}
{% load case_extras %}

{% block head %}
{{ block.super }}
<script type="text/javascript" src="{% url site-media path="sorttable/sorttable.js" %}"></script>
<link rel="stylesheet" type="text/css" href="{% url site-media path="sorttable/sorttable.css" %}">
{% endblock %}

{% block title %}{{ block.super }}: Cases{% endblock %}

{% block header %}<h2>All Cases</h2>{% endblock %}

{% block content %}
{% block cases_header %}{% endblock %}
{# sorttable.js doesn't like empty tables #}
<table{% if case_list %} class="sortable"{% endif %}>
	<thead>
	    <tr>
	        <th>NMFS ID</th>
		    <th class="sorttable_numeric">case</th>
		    <th>type</th>
		    <th>animal</th>
		    <th>first observation</th>
		    <th>first report</th>
		</tr>
	</thead>
	<tbody>
	    {% for case in case_list %}
	    <tr>
	        <td>{{ case.nmfs_id|default:"<i>none</i>" }}</td>
		    <td sorttable_customkey="{{ case.date.year|default:10000 }}{{ case.yearly_number|default:0|stringformat:"03d" }}{{ case.id|stringformat:"04d" }}">{% case_link case %}</td>
		    <td>{{ case.case_type }}</td>
		    <td>{% animal_link case.animal %}</td>
		    <td>{{ case.first_observation_date }}</td>
		    <td>{{ case.first_report_date }}</td>
	    </tr>
	    {% empty %}
	    <tr><td colspan="5" style="text-align:center;"><i>no cases</i></td></tr>
	    {% endfor %}
	</tbody>
</table>
<a href="{% url create_case %}">add a new case</a>
{% endblock %}
